!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);class i{constructor(t,e){this.x=t,this.y=e}get mag(){return Math.sqrt(this.x**2+this.y**2)}get tetha(){return Math.atan2(this.y,this.x)}plus(t){return new i(this.x+t.x,this.y+t.y)}minus(t){return new i(this.x-t.x,this.y-t.y)}dot(t){return this.x*t.x+this.y*t.y}mult(t){return new i(this.x*t,this.y*t)}div(t){return new i(this.x/t,this.y/t)}normalize(){const t=this.mag;return 0!=t&&1!=t?this.div(t):this}rotate(t){return new i(this.x*Math.cos(t)-this.y*Math.sin(t),this.x*Math.sin(t)+this.y*Math.cos(t))}project(t){const e=t.normalize();let r=e.dot(this);return r<0&&(r=0),r>t.mag&&(r=t.mag),e.mult(r)}}function n(t){return 180*t/Math.PI}function s(t,e,r,i,n,s){t.beginPath(),t.arc(e,r,i,0,2*Math.PI),t.strokeStyle=n,t.fillStyle=n,1==s?t.fill():t.stroke()}const o="black",c="grey";const a=.04,h=2,l=3*Math.PI/180;const u=new class{constructor(t,e,r){this.canvas=t,this.canvas.width=2*e,this.canvas.height=2*r,this.canvas.style.width=e+"px",this.canvas.style.height=r+"px",this.canvas.style.border="1px solid black",this.ctx=this.canvas.getContext("2d"),this.ctx.scale(2,2),this.width=e,this.height=r}draw(t){this.clearWorld(),this.drawCelestialObject(t.sun),this.drawRocket(t.rocket),t.drawGrid&&this.drawGrid(0,this.width,0,this.height,3)}clearWorld(){this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height)}drawOrbits(t){for(let e=1;e<=t.satellites.length;e++)s(this.ctx,t.pos.x,t.pos.y,t.r+t.orbitR*e,o,!1)}drawFrame(t){this.ctx.strokeStyle="green",this.ctx.strokeRect(t.pos.x-t.r,t.pos.y-t.r,2*t.r,2*t.r)}drawGrid(t,e,r,i,n){if(n<=0)return;let s=t+(e-t)/2,o=r+(i-r)/2;this.ctx.strokeStyle=c,this.ctx.beginPath(),this.ctx.moveTo(t,o),this.ctx.lineTo(e,o),this.ctx.stroke(),this.ctx.beginPath(),this.ctx.moveTo(s,r),this.ctx.lineTo(s,i),this.ctx.stroke(),this.drawGrid(t,s,r,o,n-1),this.drawGrid(s,e,r,o,n-1),this.drawGrid(t,s,o,i,n-1),this.drawGrid(s,e,o,i,n-1)}drawCelestialObject(t){t.drawOrbits&&this.drawOrbits(t),s(this.ctx,t.pos.x,t.pos.y,t.r,t.color,!0),t.satellites.filter(Boolean).forEach(this.drawCelestialObject.bind(this))}drawRocket(t){const{p1:e,p2:r,p3:i}=t;this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(r.x,r.y),this.ctx.lineTo(i.x,i.y),this.ctx.fillStyle=t.color,this.ctx.fill()}}(document.getElementById("canvas"),400,400);function d({rocket:t,sun:e,time:r=0,drawGrid:i=!1}){this.time=r,this.rocket=t,this.sun=x(e,r),this.drawGrid=i}function w({p1:t,p2:e,p3:r,angle:n=0,dir:s=new i(1,0),speed:o=.1,color:c="navy"}){this.p1=t,this.p2=e,this.p3=r,this.dir=s,this.angle=n,this.speed=o,this.color=c}function p({r:t,orbitR:e,color:r,pos:n=new i(0,0),drawOrbits:s=!1,satellites:o=[]}){this.r=t,this.pos=n,this.color=r,this.orbitR=e,this.drawOrbits=s,this.satellites=o}function f(t){const{p1:e,p2:r,p3:n}=t,s=new i((e.x+r.x+n.x)/3,(e.y+r.y+n.y)/3),o=t.dir.mult(t.speed),c=t.angle;return new w({...t,p1:e.minus(s).rotate(c).plus(s).plus(o),p2:r.minus(s).rotate(c).plus(s).plus(o),p3:n.minus(s).rotate(c).plus(s).plus(o),angle:0})}function x(t,e){return t.satellites.forEach((r,s)=>{if(r){const o=t.r+t.orbitR*(s+1),c=e/(5e3*(s+1));r.pos=function(t,e,r){return new i(t.x+e*Math.sin(n(r)),t.y+e*Math.cos(n(r)))}(t.pos,o,c),x(r,5*e)}}),t}function y(t,e){let r=0,i=0;e.ArrowLeft&&(r-=l),e.ArrowRight&&(r+=l),e.ArrowDown&&(i-=a),e.ArrowUp&&(i+=a);const n=t.dir.rotate(r),s=t.speed+i,o=s<0?0:Math.min(s,h);return new w({...t,angle:r,dir:n,speed:o})}!function({ws:t,onDraw:e,onTick:r,onKey:i}){const n=function(t){const e=Object.create(null);function r(r){t.includes(r.key)&&(e[r.key]="keydown"==r.type,r.preventDefault())}return window.addEventListener("keyup",r),window.addEventListener("keydown",r),e}(["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"]),s=function(t,e,r,i=null){requestAnimationFrame((function(){e(t);const o=i?r(i(t,n)):r(t,n);s(o,e,r,i)}))};s(t,e,r,i)}({ws:new d({rocket:new w({p1:new i(100,100),p2:new i(100,110),p3:new i(120,105)}),sun:new p({pos:new i(200,200),r:25,orbitR:40,color:"orange",drawOrbits:!0,satellites:[new p({r:8,orbitR:3,color:"red"}),new p({r:10,orbitR:10,color:"blue",drawOrbits:!0,satellites:[new p({r:5,orbitR:1,color:"grey"})]}),new p({r:12,orbitR:5,color:"brown"})]})}),onDraw:function(t){u.draw(t)},onTick:function(t){const e=t.time+1;return new d({...t,time:e,sun:x(t.sun,e),rocket:f(t.rocket)})},onKey:function(t,e){return e.ArrowUp||e.ArrowDown||e.ArrowLeft||e.ArrowRight?new d({...t,rocket:y(t.rocket,e)}):t}})}]);